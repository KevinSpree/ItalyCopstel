<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Global PSAP Directory – 127 Cities</title>
  <style>
    body {
      background: #0d0d0d;
      color: #e0e0e0;
      font-family: 'Segoe UI', system-ui, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    .container {
      flex: 1;
      max-width: 680px;
      margin: auto;
      padding: 24px;
    }
    h1 {
      text-align: center;
      color: #bb86fc;
      margin-bottom: 20px;
      font-size: 24px;
    }
    select {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 10px;
      border: 1px solid #333;
      background: #252525;
      color: white;
      font-size: 16px;
    }
    .number-list {
      margin-top: 20px;
    }
    .number-item {
      display: block;
      padding: 14px;
      margin: 10px 0;
      background: #2a2a2a;
      color: #03dac6;
      text-decoration: none;
      border-radius: 10px;
      font-weight: bold;
      text-align: center;
      transition: all 0.2s;
    }
    .number-item:hover {
      background: #333;
      transform: translateY(-2px);
    }
    .address-section {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #333;
    }
    textarea {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #333;
      background: #252525;
      color: white;
      font-size: 15px;
      resize: vertical;
      min-height: 80px;
    }
    .search-buttons {
      display: flex;
      gap: 10px;
      margin-top: 12px;
    }
    .search-btn {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      font-size: 15px;
    }
    .google { background: #4285f4; color: white; }
    .yandex { background: #ffcc00; color: black; }
    .note {
      margin-top: 20px;
      padding: 12px;
      background: #2a1a1a;
      border-left: 4px solid #cf6679;
      font-size: 13px;
      color: #ffb3ba;
    }

    /* Footer with rotating text */
    .footer {
      text-align: center;
      padding: 20px;
      background: #151515;
      margin-top: 30px;
    }
    .rotating-text {
      display: inline-block;
      font-size: 20px;
      font-weight: bold;
      color: #bb86fc;
      animation: rotate360 8s linear infinite;
    }

    @keyframes rotate360 {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Global PSAP Directory – 127 Cities</h1>
    <p>Select country  city  click to call from Germany or anywhere.</p>

    <select id="countrySelect">
      <option value="">Select Country</option>
    </select>

    <select id="citySelect" disabled>
      <option value="">Select City</option>
    </select>

    <div class="number-list" id="numberList"></div>

    <!-- Address Search -->
    <div class="address-section">
      <h3> Search by Address</h3>
      <p>Paste an address to find local emergency services:</p>
      <textarea id="addressInput" placeholder="e.g., Via Roma 10, Milan, Italy"></textarea>
      <div class="search-buttons">
        <button class="search-btn google" onclick="searchGoogle()">Search on Google</button>
        <button class="search-btn yandex" onclick="searchYandex()">Search on Yandex</button>
      </div>
    </div>

    <div class="note">
       These are general police station numbers. For emergencies, always dial <strong>112</strong>.
    </div>
  </div>

  <!-- Rotating Footer -->
  <div class="footer">
    <div class="rotating-text">MC&AI</div>
  </div>

  <script>
    const psapData = {
      "Italy": {
        "Rome": "+390646861",
        "Milan": "+390277961",
        "Naples": "+390817951111",
        "Turin": "+3901156771",
        "Palermo": "+390916131111",
        "Genoa": "+3901053911",
        "Bologna": "+390516466111",
        "Florence": "+3905523451",
        "Bari": "+3908059711",
        "Catania": "+3909571911",
        "Venice": "+390415295111",
        "Verona": "+3904580771",
        "Messina": "+3909065011",
        "Padua": "+390498237111",
        "Trieste": "+390404191",
        "Brescia": "+3903037711",
        "Parma": "+390521233111",
        "Modena": "+39059222111",
        "Reggio Calabria": "+390965399111",
        "Livorno": "+390586844111",
        "Cagliari": "+39070605111",
        "Perugia": "+39075515111",
        "Ancona": "+39071599111",
        "Lecce": "+390832333111",
        "Pisa": "+39050555111"
      },
      "France": {
        "Paris": "+33140205050",
        "Marseille": "+33491333333",
        "Lyon": "+33472737373",
        "Toulouse": "+33561155050",
        "Nice": "+33493131313",
        "Nantes": "+33240413000",
        "Strasbourg": "+33388203000",
        "Montpellier": "+33467134000",
        "Bordeaux": "+33556444444",
        "Lille": "+33320444444",
        "Rennes": "+33299366000",
        "Reims": "+33326777000",
        "Le Havre": "+33235213000",
        "Saint-Étienne": "+33477333000",
        "Toulon": "+33494103000",
        "Grenoble": "+33476555000",
        "Dijon": "+33380593000",
        "Angers": "+33241243000",
        "Nîmes": "+33466677000",
        "Villeurbanne": "+33478023000"
      },
      "Spain": {
        "Madrid": "+34913228000",
        "Barcelona": "+34932255800",
        "Valencia": "+34963897700",
        "Seville": "+34954548000",
        "Zaragoza": "+34976727700",
        "Malaga": "+34952368000",
        "Murcia": "+34968228000",
        "Palma": "+34971718000",
        "Bilbao": "+34944016000",
        "Alicante": "+34965288000",
        "Valladolid": "+34983218000",
        "Granada": "+34958228000",
        "Oviedo": "+34985228000",
        "Santander": "+34942208000",
        "Pamplona": "+34948228000",
        "Logroño": "+34941298000",
        "Huelva": "+34959258000",
        "Badajoz": "+34924218000",
        "Cádiz": "+34956228000",
        "Jaén": "+34953228000"
      },
      "Portugal": {
        "Lisbon": "+351217652000",
        "Porto": "+351222088000",
        "Braga": "+351253208000",
        "Coimbra": "+351239708000",
        "Faro": "+351289897000",
        "Setúbal": "+351265550000",
        "Aveiro": "+351234302000",
        "Viseu": "+351232439000",
        "Évora": "+351266708000",
        "Guarda": "+351271208000",
        "Beja": "+351284308000",
        "Bragança": "+351273308000",
        "Portimão": "+351282428000"
      },
      "Greece": {
        "Athens": "+302106464444",
        "Thessaloniki": "+302310552000",
        "Patras": "+302610272000",
        "Heraklion": "+302810228000",
        "Larissa": "+302410535000",
        "Volos": "+302421077000",
        "Ioannina": "+302651077000",
        "Chania": "+302821077000",
        "Kavala": "+302510228000",
        "Serres": "+302321077000"
      },
      "Bulgaria": {
        "Sofia": "+35929823111",
        "Plovdiv": "+35932613111",
        "Varna": "+35952692111",
        "Burgas": "+35956876111",
        "Ruse": "+35982828111",
        "Stara Zagora": "+35942603111",
        "Pleven": "+35964828111",
        "Sliven": "+35944628111",
        "Dobrich": "+35958628111"
      },
      "Hungary": {
        "Budapest": "+3614444444",
        "Debrecen": "+3652510100",
        "Szeged": "+3662550550",
        "Miskolc": "+3646515100",
        "Pécs": "+3672513100",
        "Gyr": "+3696510100",
        "Nyíregyháza": "+3642510100",
        "Kecskemét": "+3676510100",
        "Székesfehérvár": "+3622510100"
      },
      "Switzerland": {
        "Zurich": "+41444117777",
        "Geneva": "+41224277000",
        "Bern": "+41316344444",
        "Basel": "+41612797777",
        "Lausanne": "+41213155555",
        "Lugano": "+41918147777",
        "St. Gallen": "+41712437777",
        "Winterthur": "+41522677777",
        "Lucerne": "+41412287777",
        "Zug": "+41417287777"
      },
      "Poland": {
        "Warsaw": "+48226038000",
        "Krakow": "+48126325000",
        "Lodz": "+48426364100",
        "Wroclaw": "+48717877000",
        "Poznan": "+48618737000",
        "Gdansk": "+48583033000",
        "Szczecin": "+48914643000",
        "Bydgoszcz": "+48525223000",
        "Lublin": "+48815323000",
        "Katowice": "+48322593000"
      },
      "Cyprus": {
        "Nicosia": "+35722808080",
        "Limassol": "+35725808080",
        "Larnaca": "+35724808080",
        "Paphos": "+35726808080"
      }
    };

    const countrySelect = document.getElementById("countrySelect");
    const citySelect = document.getElementById("citySelect");
    const numberList = document.getElementById("numberList");

    Object.keys(psapData).forEach(country => {
      const opt = document.createElement("option");
      opt.value = country;
      opt.textContent = country;
      countrySelect.appendChild(opt);
    });

    countrySelect.addEventListener("change", () => {
      citySelect.innerHTML = '<option value="">Select City</option>';
      citySelect.disabled = true;
      numberList.innerHTML = "";

      const country = countrySelect.value;
      if (country) {
        const cities = Object.keys(psapData[country]);
        cities.forEach(city => {
          const opt = document.createElement("option");
          opt.value = city;
          opt.textContent = city;
          citySelect.appendChild(opt);
        });
        citySelect.disabled = false;
      }
    });

    citySelect.addEventListener("change", () => {
      const country = countrySelect.value;
      const city = citySelect.value;
      numberList.innerHTML = "";

      if (country && city) {
        const fullNumber = psapData[country][city];
        const display = formatNumber(fullNumber);
        const link = document.createElement("a");
        link.href = `tel:${fullNumber}`;
        link.className = "number-item";
        link.textContent = ` ${display} (${city})`;
        numberList.appendChild(link);
      }
    });

    function formatNumber(num) {
      if (num.startsWith("+39") && num.length === 10) return `${num.slice(0,3)} ${num.slice(3,5)} ${num.slice(5)}`;
      if (num.startsWith("+33") && num.length === 12) return `${num.slice(0,3)} ${num.slice(3,4)} ${num.slice(4,6)} ${num.slice(6,8)} ${num.slice(8)}`;
      if (num.startsWith("+34") && num.length === 12) return `${num.slice(0,3)} ${num.slice(3,6)} ${num.slice(6)}`;
      if (num.startsWith("+351") && num.length === 12) return `${num.slice(0,4)} ${num.slice(4,7)} ${num.slice(7)}`;
      if (num.startsWith("+30") && num.length === 13) return `${num.slice(0,3)} ${num.slice(3,7)} ${num.slice(7)}`;
      return num.replace(/(\+\d{1,3})(\d{2,4})(\d{2,4})(\d{2,4})?/, (m, a, b, c, d = "") => 
        d ? `${a} ${b} ${c} ${d}` : `${a} ${b} ${c}`
      );
    }

    function searchGoogle() {
      const addr = document.getElementById("addressInput").value.trim();
      if (addr) {
        window.open(`https://www.google.com/maps/search/${encodeURIComponent(addr)}`, "_blank");
      } else {
        alert("Please enter an address.");
      }
    }

    function searchYandex() {
      const addr = document.getElementById("addressInput").value.trim();
      if (addr) {
        window.open(`https://yandex.com/maps/?text=${encodeURIComponent(addr)}`, "_blank");
      } else {
        alert("Please enter an address.");
      }
    }
  </script>
</body>
</html>